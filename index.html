<script>
/**
 * Workaround: auto-skip Slide 5 (which is hanging) so the course can continue.
 * Slide numbers are 1-based in the UI; we treat Slide 5 as index 4 internally.
 */
(function () {
  function getPlayerSafe() {
    try {
      if (window.PresentationPlayer && typeof PresentationPlayer.getPlayer === "function") {
        return PresentationPlayer.getPlayer();
      }
    } catch (e) {}
    return null;
  }

  function getSlideIndex(player) {
    try {
      // Try common APIs across iSpring builds
      if (player && typeof player.getCurrentSlideIndex === "function") return player.getCurrentSlideIndex(); // 0-based
      if (player && typeof player.getCurrentSlideNumber === "function") return player.getCurrentSlideNumber() - 1; // convert to 0-based
      if (player && typeof player.currentSlideIndex === "number") return player.currentSlideIndex; // 0-based
    } catch (e) {}
    return null;
  }

  function goNext(player) {
    try {
      if (player && typeof player.next === "function") return player.next();
      // fallback
      if (player && typeof player.goToSlide === "function") return player.goToSlide(5); // 0-based -> slide 6
    } catch (e) {}
  }

  // Poll a few times while iSpring initializes the slide
  var attempts = 0;
  var timer = setInterval(function () {
    attempts++;

    var p = getPlayerSafe();
    var idx = getSlideIndex(p);

    // Slide 5 == index 4 (0-based)
    if (idx === 4) {
      goNext(p);
      clearInterval(timer);
      return;
    }

    // Stop after ~15 seconds (30 * 500ms)
    if (attempts >= 30) clearInterval(timer);
  }, 500);
})();
</script>
